# Default server configuration
# {{ nginx_vhost_path }}/default
# Nginx default vhost file on {{ inventory_hostname }} 
# generated: {{ ansible_date_time.date }}
# {{ ansible_managed }}, can be deleted or manual changes overwritten!

server {

  server_name _;
  root /var/www/html;
  index index.nginx-debian.html;

  listen 80 default_server;
  listen [::]:80 default_server;

  # SSL configuration
  listen 443 ssl default_server;
  listen [::]:443 ssl default_server;
  include snippets/snakeoil.conf;

  # First attempt to serve request as file, then as directory, then fall back to 404.
  location / {
    try_files $uri $uri/ =404;
  }

  # Allow access to the letsencrypt.org ACME challenges directory.
  location ^~ /.well-known/acme-challenge {
    alias /var/www/dehydrated;
    try_files $uri 404;
  }

}