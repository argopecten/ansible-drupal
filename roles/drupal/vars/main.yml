---
# Metadata for the drupal role

# Ownership and permissions for Drupal web directory
docroot_permissions:
  - { name: "Set ownership", cmd: "find {{ drupal_dir }}/web -exec chown {{ drupal_owner }}:{{ nginx_user }} '{}' \\+" }
  - { name: "Set directory permissions", cmd: "find {{ drupal_dir }}/web -type d -exec chmod 750 '{}' \\+" }
  - { name: "Set file permissions", cmd: "find {{ drupal_dir }}/web -type f -exec chmod 640 '{}' \\+" }

# Allow write permissions for webserver user for sites/{{ site_dir }} directory
sites_permissions:
  - { name: "Set ownership", cmd: "find {{ drupal_dir }}/web/sites/{{ site_dir }} -exec chown {{ drupal_owner }}:{{ nginx_user }} '{}' \\+" }
  - { name: "Set directory permissions", cmd: "find {{ drupal_dir }}/web/sites/{{ site_dir }} -type d -exec chmod 750 '{}' \\+" }
  - { name: "Set file permissions", cmd: "find {{ drupal_dir }}/web/sites/{{ site_dir }} -type f -exec chmod 640 '{}' \\+" }
